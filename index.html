<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insurance Premium Predictor</title>
<style>
    body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        background: radial-gradient(circle at top, #0a0f24, #000 80%);
        color: #e0e6f0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding: 50px 0;
        overflow-y: auto;
    }

    .glow-circle {
        position: absolute;
        width: 350px;
        height: 350px;
        background: rgba(0, 140, 255, 0.25);
        border-radius: 50%;
        filter: blur(90px);
        animation: float 8s infinite ease-in-out alternate;
    }
    .circle1 { top: -100px; left: -100px; }
    .circle2 { bottom: -120px; right: -120px; }

    @keyframes float {
        from { transform: translateY(0px); }
        to { transform: translateY(40px); }
    }

    .container {
        width: 420px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.08);
        border-radius: 18px;
        box-shadow: 0 0 25px rgba(0, 140, 255, 0.35), 0 10px 30px rgba(0,0,0,0.6);
        backdrop-filter: blur(14px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        animation: fadeIn 1.3s ease-in-out;
        margin-bottom: 50px;
        position: relative;
        z-index: 1;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
    }

    h2 {
        text-align: center;
        margin-bottom: 20px;
        font-weight: 600;
        color: #4fb4ff;
        text-shadow: 0 0 8px rgba(80, 180, 255, 0.7);
    }

    label {
        display: block;
        margin-top: 15px;
        font-size: 14px;
        font-weight: 300;
    }

    input, select {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border: none;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.12);
        color: white; /* dropdown & input text color */
        backdrop-filter: blur(5px);
        outline: none;
        font-size: 14px;
        transition: all 0.3s ease;
    }

    select option {
        color: black; /* options text color */
    }

    input:focus, select:focus {
        background: rgba(255, 255, 255, 0.2);
        box-shadow: 0 0 8px #4fb4ff;
    }

    button {
        width: 100%;
        margin-top: 20px;
        padding: 12px;
        border: none;
        background: linear-gradient(135deg, #0d6efd, #009ffd);
        color: white;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        transition: 0.3s ease;
        box-shadow: 0 0 12px rgba(0, 140, 255, 0.5), 0 6px 20px rgba(0,0,0,0.5);
        position: relative;
        overflow: hidden;
    }
    button:hover {
        background: linear-gradient(135deg, #009ffd, #0d6efd);
        transform: translateY(-2px);
        box-shadow: 0 0 25px #33aaff, 0 10px 20px rgba(0,0,0,0.6);
    }

    .loader {
        border: 4px solid rgba(255, 255, 255, 0.2);
        border-top: 4px solid #33aaff;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
        display: inline-block;
        margin-left: 10px;
        vertical-align: middle;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    #result {
        margin-top: 20px;
        padding: 15px;
        background: rgba(0, 140, 255, 0.12);
        border-left: 4px solid #33aaff;
        border-radius: 10px;
        display: none;
        animation: fadeIn 0.6s ease;
    }
</style>
</head>
<body>

<div class="glow-circle circle1"></div>
<div class="glow-circle circle2"></div>

<div class="container">
    <h2>Insurance Premium Predictor</h2>

    <label>Age</label>
    <input type="number" id="age" min="1" max="119" placeholder="Enter age">

    <label>Weight (kg)</label>
    <input type="number" id="weight" min="1" placeholder="Enter weight">

    <label>Height (m)</label>
    <input type="number" step="0.01" id="height" min="0.5" max="2.5" placeholder="Enter height">

    <label>Income (LPA)</label>
    <input type="number" id="income" min="1" placeholder="Annual income">

    <label>Smoker?</label>
    <select id="smoker">
        <option value="true">Yes</option>
        <option value="false">No</option>
    </select>

    <label>City</label>
    <select id="city">
        <option value="Mumbai">Mumbai</option>
        <option value="Delhi">Delhi</option>
        <option value="Bangalore">Bangalore</option>
        <option value="Chennai">Chennai</option>
        <option value="Kolkata">Kolkata</option>
        <option value="Hyderabad">Hyderabad</option>
        <option value="Pune">Pune</option>
        <!-- add more cities as needed -->
    </select>

    <label>Occupation</label>
    <select id="occupation">
        <option value="retired">Retired</option>
        <option value="freelancer">Freelancer</option>
        <option value="student">Student</option>
        <option value="government_job">Government Job</option>
        <option value="business_owner">Business Owner</option>
        <option value="unemployed">Unemployed</option>
        <option value="private_job">Private Job</option>
    </select>

    <button onclick="predict()">
        Predict Premium
        <span class="loader" id="loader"></span>
    </button>

    <div id="result"></div>
</div>

<script>
async function predict() {
    const loader = document.getElementById("loader");
    loader.style.opacity = 1;
    const resultDiv = document.getElementById("result");
    resultDiv.style.display = "none";

    const data = {
        age: Number(document.getElementById("age").value),
        weight: Number(document.getElementById("weight").value),
        height: Number(document.getElementById("height").value),
        income_lpa: Number(document.getElementById("income").value),
        smoker: document.getElementById("smoker").value === "true",
        city: document.getElementById("city").value,
        occupation: document.getElementById("occupation").value
    };

    try {
        const response = await fetch("http://127.0.0.1:8000/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        const result = await response.json();
        loader.style.opacity = 0;

        if (response.status === 200 && result.response) {
            resultDiv.style.display = "block";
            resultDiv.innerHTML =
                `<strong>Predicted Category:</strong> ${result.response.predicted_category}<br>
                 <strong>Confidence:</strong> ${result.response.confidence}`;
        } else {
            alert("Error: " + JSON.stringify(result));
        }

    } catch (err) {
        loader.style.opacity = 0;
        alert("Cannot connect to FastAPI server!");
    }
}
</script>
</body>
</html>